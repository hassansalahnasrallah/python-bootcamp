{% extends "Vacations/base.html" %} {%block head %} Vacation List{% endblock%}

<head> </head>

{% block container_block %}

<style>
  body {
    background-color: #209171;
  }

  
</style>
<p><strong>Vacations:</strong></p>

<body>
  <table id="vacation_table" class="table" style="width: 75%;">
    <thead>
      <tr>
        <th>id</th>
        <th>Location</th>
        <th>Employee</th>
        <th>From:</th>
        <th>To:</th>
      </tr>
    </thead>
    <tbody>
      {% for vacation in vacations %}
      <tr>
        <td>{{vacation.user_id}}</td>

        <td class="editable" data-id= '{{vacation.id}}' data-type="desc">{{vacation.desc}}</td>
        <td>{{vacation.user}}</td>
        <td class="editable" data-id= '{{vacation.id}}' data-type="from_date">{{vacation.from_date}}</td>
        <td class="editable" data-id= '{{vacation.id}}' data-type="to_date">{{vacation.to_date}}
          <button type="submit" value="edit" class="btn btn-link">Edit</button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  
  <script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"
  ></script>

  <script
    type="text/javascript"
    charset="utf8"
    src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js"
  ></script>

  <script>
       $(function(){
       $("#vacation_table").DataTable();

         $("#vacation_table").DataTable({
       	 ajax: {
       	 	url: "{% url 'vacation_list' %}",
       	 	type: "POST",
       	 	data: function(d){
       	 		d.csrfmiddlewaretoken = $("input[name=csrfmiddlewaretoken]").val();
            },
          },
          
       })
    });
     
  </script>

  <script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"
  ></script>

  <script
    type="text/javascript"
    charset="utf8"
    src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js"
  ></script>

  <script>
    $(document).ready(function(){
      $(document).on("dblclick",".editable",function(){
          var value=$(this).text();
          var data_type=$(this).data("type");
          var input_type="text";
          if(data_type=="created_at")
          {
              input_type="datetime-local";
          }
          var input="<input type='"+input_type+"' class='input-data' value='"+value+"' class='form-control'>";
          $(this).html(input);
          $(this).removeClass("editable")
      });
    });
  </script>
</body>
{% endblock %}
