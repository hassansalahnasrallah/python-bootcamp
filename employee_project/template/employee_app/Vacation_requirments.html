
{% extends "employee_app/base.html" %}
{% block title %} Vacation managing:{% endblock %}
{% block header %}Employee Vacation:{% endblock %}
{% block container_block %}
<form method="POST" name="Vacation-Fields" action="{% url  'Vacation_save' %}" >
 {% csrf_token %}
<table>
 <tr>
<td><label for="Description" >Description:</label>
<textarea id="desc" name="desc" rows="4" cols="50"  required>{{vacation.Description}}</textarea></td></tr>

<tr><td><label for="Date_From">DateTime_From:</label>
<input type="text" name="datefrom" id="date_from" value="{{vacation.Datetime_From|date:'Y-m-d'}}" required /></td></tr>

<tr><td><label for="Date_To">DateTime_To:</label>
<input type="text" name="dateto" id="date_to"  value="{{vacation.Datetime_To|date:'Y-m-d'}}" required/></td></tr>

<tr><td><label for="Duration">Duration:</label>
<input type="text" name="duration_d" id="duration"  value="{{vacation.Duration}}" readonly/></td></tr>

<tr><td><button class="btn btn-primary" id="CalButton">Calculate Duration</button></td></tr>

<tr><td><input type="hidden" name="vacation_id" value="{{vacation.id}}" /></td></tr>

</table>
<br><br>

<button type="button" id="Vacation_save" class="btn btn-primary">Save</button>
</form>
<script src="http://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>

$("#Vacation_save").click(function(){
	  
	$.ajax({
		   type:"POST",
		   url:"{% url  'Vacation_save' %}",
		   data:{
			   desc: $("textarea[name=desc]").val(),
			   datefrom: $("input[name=datefrom]").val(),
			   dateto: $("input[name=dateto]").val(),
			   duration_d: $("input[name=duration_d]").val(),
			   vacation_id: $("input[name=vacation_id]").val(),
			   csrfmiddlewaretoken: $("input[name=csrfmiddlewaretoken]").val(),
		   },
		   dataType:'json',
		   success: function(){
			   
			   
		   },
		   error:function(){
			   
		   },
	   });
})
</script>

{% endblock %}